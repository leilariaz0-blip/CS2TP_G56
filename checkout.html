<!DOCTYPE html>
<html lang="en">
<head>
    <!-- page encoding + title -->
    <meta charset="UTF-8">
    <title>Checkout</title>
    <!-- main stylesheet -->
    <link rel="stylesheet" href="css/index.css">
    <!-- site-wide JS -->
    <script src="js/index.js" defer></script>
</head>
<body>
    <div class="page-wrapper">
        <div class="PageContent">

             <!-- top navbar links -->
        <div class="TopNav">
    <a class="logo-link" href="home.html" aria-label="Seraphine Atelier home"><img class="header-logo" src="assets/images/logo3-Regulus.jpg" alt="Seraphine Atelier logo"></a>
    <a href="home.html">Home</a>
            <a href="about.html">About</a>
    <a href="products.html">Products</a>
    <a href="contact.html">Contact</a>
    <!-- icons (profile/cart) get generated by JS -->
        <div class="IconNav">
            <a class="NavSearch" href="products.html#searchInput" aria-label="Search"><img src="assets/images/SearchIcon.png" alt="Search"></a>
            <div id="auth-buttons">
                <a href="login.html" aria-label="Login"><img src="assets/images/ProfileIcon.png" alt="Profile"></a>
                <a href="cart.html" aria-label="Cart"><img src="assets/images/CartIcon.png" alt="Cart"><span id="cart-count" style="display:inline-block;margin-left:6px;color:#111;">0</span></a>
            </div>
        </div>
</div>

<h1>Checkout</h1>
<!-- container where chosen products will be listed -->
<div id="checkout-items"></div>
<!-- button to confirm order -->
<button id="placeOrderBtn">Place Order</button>

<script>
    /* fetch the cart items and show them on the page */
fetch(window.getApiPath("get-cart.php"), {
    credentials: 'include'
})
    .then(r => r.json())
    .then(cart => {
        const c = document.getElementById("checkout-items");
        // if cart is empty, tell the user
        if (!cart.items || !cart.items.length) {
            c.innerHTML = "<p>Your cart is empty.</p>";
            return;
        }
        cart.items.forEach(i => {
            c.innerHTML += `<p>${i.name} × ${i.quantity} - £${i.price}</p>`;
        });
    });
/* when user clicks place order, send request to server */
document.getElementById("placeOrderBtn").onclick = () => {
        fetch(window.getApiPath("place-order.php"), {
            credentials: 'include'
        }).then(() => {
                alert("Order placed!");
                window.location = "home.html"; // redirect to home after ordering
        });
};
</script>

        </div>
 <!-- footer section -->
        <div id="site-footer">
            <footer class="footer">
                <!-- social media icons -->
                <div class="FooterIconsContainer">
                    <img src="assets/images/FacebookIcon.png" class="FooterIcons" alt="facebook">
                    <img src="assets/images/InstagramIcon.png" class="FooterIcons" alt="instagram">
                    <img src="assets/images/YoutubeIcon.png" class="FooterIcons" alt="youtube">
                </div>
                <!-- copyright text -->
                <p class="ContactTitle">© 2025 Luxury Jewelry Store</p>
            </footer>
        </div>
        <!-- duplicated JS include (can stay) -->
        <script src="js/index.js" defer></script>
    </div>
</body>
</html>
